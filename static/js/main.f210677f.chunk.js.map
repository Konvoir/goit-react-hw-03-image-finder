{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","App.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","servises/APIpixabay.js","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleInputChange","e","setState","target","value","handleSubmit","preventDefault","trim","props","onSubmit","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","id","webformatURL","largeImageURL","tags","onClick","src","alt","ImageGalleryItemImage","ImageGallery","images","map","axios","defaults","baseURL","APIpixabay","searchQuery","currentPage","get","then","response","data","hits","Button","modalRoot","document","querySelector","Modal","hendleKeydown","code","onClose","hendleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","isLoaded","error","showModal","tag","onChangeQuery","fetchImages","options","length","prevState","catch","finally","toggleModal","onImageClick","onButtonClick","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","shouldRenderMoreButton","container","message","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f210677f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__6xg4C\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2bTdU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1RbO1\",\"Modal\":\"Modal_Modal__3qGOE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2sdq2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2LFil\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2dsJK\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from \"./Searchbar.module.css\"\r\n\r\nexport class Searchbar extends Component {\r\n    state = {\r\n        query: \"\",\r\n    }\r\n\r\n    handleInputChange = e => {\r\n        this.setState({ query: e.target.value })\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault()\r\n        if (this.state.query.trim() === \"\") { return; }\r\n        this.props.onSubmit(this.state.query)\r\n        this.setState({query: \"\"})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <header className={s.Searchbar}>\r\n                <form className={s.SearchForm}\r\n                    onSubmit={this.handleSubmit}\r\n                >\r\n                    \r\n                    <button type=\"submit\" className={s.SearchFormButton}>\r\n                        <span className={s.SearchFormButtonLabel}>Search</span>\r\n                    </button>\r\n\r\n                    <input\r\n                        className={s.SearchFormInput}\r\n                        type=\"text\"\r\n                        name=\"query\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Search images and photos\"\r\n                        value={this.state.query}\r\n                        onChange={this.handleInputChange}\r\n                    />\r\n                </form>\r\n            </header>\r\n\r\n        );  \r\n    }\r\n};\r\n\r\nSearchbar.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n};","import PropTypes from 'prop-types';\r\nimport s from \"./ImageGalleryItem.module.css\"\r\n\r\nexport const ImageGalleryItem = ({\r\n    id,\r\n    webformatURL,\r\n    largeImageURL,\r\n    tags,\r\n    onClick\r\n}) => (\r\n    <li key={id} className={s.ImageGalleryItem}>\r\n        <img\r\n            src={webformatURL}\r\n            alt={tags}\r\n            className={s.ImageGalleryItemImage}\r\n            onClick={ () => onClick(largeImageURL)}/>\r\n            </li>\r\n        );\r\n\r\n\r\nImageGalleryItem.propTypes = {\r\n    id: PropTypes.number.isRequired,\r\n    webformatURL: PropTypes.string.isRequired,\r\n    largeImageURL: PropTypes.string.isRequired,\r\n    tags: PropTypes.string.isRequired,\r\n};","\r\nimport {ImageGalleryItem} from \"../ImageGalleryItem/ImageGalleryItem\"\r\nimport PropTypes from 'prop-types';\r\nimport s from \"./ImageGallery.module.css\"\r\n\r\n\r\nexport const ImageGallery = ({ images, onClick }) => (\r\n   <ul className={s.ImageGallery} >\r\n  {/* <!-- Набор <li> с изображениями --> */}\r\n        {images.map(\r\n            ({ id, webformatURL, largeImageURL, tags, }) => (\r\n                <ImageGalleryItem\r\n                    key={id}\r\n                    id={id}\r\n                    onClick={onClick}\r\n                    webformatURL={webformatURL}\r\n                    largeImageURL={largeImageURL}\r\n                    tags={tags}\r\n                />\r\n                \r\n            )\r\n        )}        \r\n    </ul>\r\n);\r\n \r\nImageGallery.propTypes = {\r\n    images: PropTypes.array.isRequired,\r\n    onClick: PropTypes.func.isRequired,\r\n};","import axios from \"axios\";\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\nconst apiKey = \"22709546-f5c1ca5c0881bb53c54fd0f13\";\n\nexport const APIpixabay = ({ searchQuery = \"\", currentPage = 1 }) => {\n  return axios\n    .get(\n      `?key=${apiKey}&q=${searchQuery}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=12`\n    )\n    .then((response) => response.data.hits);\n};\n","import s from \"./Button.module.css\"\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const Button = ({ onClick }) => (\r\n    <button className={s.Button} type=\"button\" onClick={onClick}>\r\n        Load more\r\n    </button>\r\n);\r\n    \r\n\r\nButton.propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { createPortal } from 'react-dom';\r\nimport s from \"./Modal.module.css\"\r\n\r\nconst modalRoot = document.querySelector(\"#modalRoot\")\r\n\r\nexport class Modal extends Component {\r\n\r\n    componentDidMount() {\r\n        window.addEventListener(\"keydown\", this.hendleKeydown)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"keydown\", this.hendleKeydown)\r\n    }\r\n\r\n    hendleKeydown = (e) => {\r\n        if (e.code === \"Escape\") {\r\n            this.props.onClose()\r\n        }\r\n    }\r\n\r\n    hendleBackdropClick = (e) => {\r\n        if (e.target === e.currentTarget) {\r\n            this.props.onClose()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return createPortal(\r\n            <div className={s.Overlay}\r\n                onClick={this.hendleBackdropClick}\r\n            >\r\n                <div className={s.Modal}>{ this.props.children}</div>\r\n            </div>,\r\n            modalRoot\r\n        );\r\n    }\r\n};\r\n\r\nModal.propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n};","import React, { Component } from \"react\";\n// import PropTypes from 'prop-types';\n\nimport { Searchbar } from \"./components/Searchbar/Searchbar\";\nimport { ImageGallery } from \"./components/ImageGallery/ImageGallery\";\nimport { APIpixabay } from \"./servises/APIpixabay\";\nimport Loader from \"react-loader-spinner\";\nimport { Button } from \"./components/Button/Button\";\nimport { Modal } from \"./components/Modal/Modal\";\n\nimport s from \"./App.module.css\";\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: \"\",\n    isLoaded: false,\n    error: null,\n    showModal: false,\n    largeImageURL: \"\",\n    tag: \"\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { searchQuery, images, currentPage } = this.state;\n\n    if (\n      prevState.searchQuery !== searchQuery ||\n      prevState.currentPage !== currentPage\n    ) {\n      this.fetchImages();\n    }\n\n    if (images.length > 12) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: \"smooth\",\n      });\n    }\n\n    if (prevState.currentPage !== currentPage) {\n      this.fetchImages();\n    }\n  }\n\n  onChangeQuery = (query) => {\n    this.setState({\n      images: [],\n      searchQuery: query,\n      currentPage: 1,\n      error: null,\n    });\n  };\n\n  fetchImages = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { currentPage, searchQuery };\n\n    this.setState({ isLoaded: true });\n\n    APIpixabay(options)\n      .then((images) => {\n        if (images.length > 0) {\n          this.setState((prevState) => ({\n            images: [...prevState.images, ...images],\n\n            error: false,\n          }));\n        } else {\n          this.setState({ error: true });\n        }\n      })\n      .catch(() => this.setState({ error: true }))\n      .finally(() => this.setState({ isLoaded: false }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onImageClick = (e) => {\n    this.setState({\n      largeImageURL: e.target.largeImageURL,\n    });\n    this.toggleModal();\n  };\n\n  onButtonClick = ({ currentPage }) => {\n    this.setState({ currentPage: currentPage + 1 });\n  };\n\n  render() {\n    const { isLoaded, images, error, showModal, largeImageURL, tag } =\n      this.state;\n\n    const shouldRenderMoreButton = images.length > 0 && !isLoaded;\n\n    return (\n      <div className={s.container}>\n        <Searchbar onSubmit={this.onChangeQuery}></Searchbar>\n\n        {error && (\n          <h2>\n            Sorry something went wrong, try again later!(\n            {error.message})\n          </h2>\n        )}\n\n        <ImageGallery\n          images={images}\n          onClick={this.onImageClick}\n        ></ImageGallery>\n\n        {isLoaded && (\n          <Loader type=\"Puff\" color=\"#00BFFF\" height={100} width={100} />\n        )}\n\n        {shouldRenderMoreButton && <Button onClick={this.onButtonClick} />}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={largeImageURL} alt={tag} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nApp.propTypes = {};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__4jNIz\",\"SearchForm\":\"Searchbar_SearchForm__2dFJy\",\"SearchFormButton\":\"Searchbar_SearchFormButton__2Rk-J\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2P4Uy\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1V8Wx\"};"],"sourceRoot":""}